<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5.3 Introduction to ggplot2 | R for Research</title>
  <meta name="description" content="This is a collection of handouts used in R for Research course" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="5.3 Introduction to ggplot2 | R for Research" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a collection of handouts used in R for Research course" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5.3 Introduction to ggplot2 | R for Research" />
  
  <meta name="twitter:description" content="This is a collection of handouts used in R for Research course" />
  

<meta name="author" content="Abhay Singh" />


<meta name="date" content="2020-07-15" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="5-2-r-graphical-parameters.html"/>
<link rel="next" href="6-graphics-in-r-part-ii.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.2.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.52.2/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.52.2/plotly-latest.min.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<img src="r2logo2.png" height="50" width="50" style="position:absolute;top:0px;right:0px;" /> <br/><br/><br/>
<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="1-what-is-r.html"><a href="1-what-is-r.html"><i class="fa fa-check"></i><b>1</b> What is R?</a><ul>
<li class="chapter" data-level="1.1" data-path="1-1-why-should-we-learn-r.html"><a href="1-1-why-should-we-learn-r.html"><i class="fa fa-check"></i><b>1.1</b> Why should we learn R?</a></li>
<li class="chapter" data-level="1.2" data-path="1-2-Rinstall.html"><a href="1-2-Rinstall.html"><i class="fa fa-check"></i><b>1.2</b> Installing R and RStudio on Windows</a></li>
<li class="chapter" data-level="1.3" data-path="1-3-rstudio-guiide.html"><a href="1-3-rstudio-guiide.html"><i class="fa fa-check"></i><b>1.3</b> RStudio GUI/IDE</a></li>
<li class="chapter" data-level="1.4" data-path="1-4-installing-packages.html"><a href="1-4-installing-packages.html"><i class="fa fa-check"></i><b>1.4</b> Installing Packages</a></li>
<li class="chapter" data-level="1.5" data-path="1-5-getting-help.html"><a href="1-5-getting-help.html"><i class="fa fa-check"></i><b>1.5</b> Getting Help</a></li>
<li class="chapter" data-level="1.6" data-path="1-6-task-views-in-r-introduction-installation.html"><a href="1-6-task-views-in-r-introduction-installation.html"><i class="fa fa-check"></i><b>1.6</b> Task Views in R-Introduction &amp; Installation</a></li>
<li class="chapter" data-level="1.7" data-path="1-7-r-core-packages.html"><a href="1-7-r-core-packages.html"><i class="fa fa-check"></i><b>1.7</b> R core packages</a></li>
<li class="chapter" data-level="1.8" data-path="1-8-example-1-hello-r.html"><a href="1-8-example-1-hello-r.html"><i class="fa fa-check"></i><b>1.8</b> Example-1 Hello R!</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="2-r-data-types-and-data-structures.html"><a href="2-r-data-types-and-data-structures.html"><i class="fa fa-check"></i><b>2</b> R Data Types and Data Structures</a><ul>
<li class="chapter" data-level="2.1" data-path="2-1-data-types.html"><a href="2-1-data-types.html"><i class="fa fa-check"></i><b>2.1</b> Data Types</a><ul>
<li class="chapter" data-level="2.1.1" data-path="2-1-data-types.html"><a href="2-1-data-types.html#double"><i class="fa fa-check"></i><b>2.1.1</b> Double</a></li>
<li class="chapter" data-level="2.1.2" data-path="2-1-data-types.html"><a href="2-1-data-types.html#integer"><i class="fa fa-check"></i><b>2.1.2</b> Integer</a></li>
<li class="chapter" data-level="2.1.3" data-path="2-1-data-types.html"><a href="2-1-data-types.html#logical"><i class="fa fa-check"></i><b>2.1.3</b> Logical</a></li>
<li class="chapter" data-level="2.1.4" data-path="2-1-data-types.html"><a href="2-1-data-types.html#character"><i class="fa fa-check"></i><b>2.1.4</b> Character</a></li>
<li class="chapter" data-level="2.1.5" data-path="2-1-data-types.html"><a href="2-1-data-types.html#factor"><i class="fa fa-check"></i><b>2.1.5</b> Factor</a></li>
<li class="chapter" data-level="2.1.6" data-path="2-1-data-types.html"><a href="2-1-data-types.html#date-time"><i class="fa fa-check"></i><b>2.1.6</b> Date &amp; Time</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="2-2-data-structures-in-r.html"><a href="2-2-data-structures-in-r.html"><i class="fa fa-check"></i><b>2.2</b> Data Structures in R</a><ul>
<li class="chapter" data-level="2.2.1" data-path="2-2-data-structures-in-r.html"><a href="2-2-data-structures-in-r.html#vector"><i class="fa fa-check"></i><b>2.2.1</b> Vector</a></li>
<li class="chapter" data-level="2.2.2" data-path="2-2-data-structures-in-r.html"><a href="2-2-data-structures-in-r.html#matrices"><i class="fa fa-check"></i><b>2.2.2</b> Matrices</a></li>
<li class="chapter" data-level="2.2.3" data-path="2-2-data-structures-in-r.html"><a href="2-2-data-structures-in-r.html#arrays"><i class="fa fa-check"></i><b>2.2.3</b> Arrays</a></li>
<li class="chapter" data-level="2.2.4" data-path="2-2-data-structures-in-r.html"><a href="2-2-data-structures-in-r.html#data-frames"><i class="fa fa-check"></i><b>2.2.4</b> Data Frames</a></li>
<li class="chapter" data-level="2.2.5" data-path="2-2-data-structures-in-r.html"><a href="2-2-data-structures-in-r.html#lists"><i class="fa fa-check"></i><b>2.2.5</b> Lists</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="2-3-data-importexport-in-r.html"><a href="2-3-data-importexport-in-r.html"><i class="fa fa-check"></i><b>2.3</b> Data Import/Export in R</a><ul>
<li class="chapter" data-level="2.3.1" data-path="2-3-data-importexport-in-r.html"><a href="2-3-data-importexport-in-r.html#reading-data-from-a-text-file"><i class="fa fa-check"></i><b>2.3.1</b> Reading Data from a Text File</a></li>
<li class="chapter" data-level="2.3.2" data-path="2-3-data-importexport-in-r.html"><a href="2-3-data-importexport-in-r.html#reading-data-from-csv-files"><i class="fa fa-check"></i><b>2.3.2</b> Reading Data from CSV files</a></li>
<li class="chapter" data-level="2.3.3" data-path="2-3-data-importexport-in-r.html"><a href="2-3-data-importexport-in-r.html#reading-from-excel-files"><i class="fa fa-check"></i><b>2.3.3</b> Reading from Excel Files</a></li>
<li class="chapter" data-level="2.3.4" data-path="2-3-data-importexport-in-r.html"><a href="2-3-data-importexport-in-r.html#reading-from-data-files-from-other-statistical-systems"><i class="fa fa-check"></i><b>2.3.4</b> Reading from Data Files from other Statistical Systems</a></li>
<li class="chapter" data-level="2.3.5" data-path="2-3-data-importexport-in-r.html"><a href="2-3-data-importexport-in-r.html#importing-data-using-rstudio"><i class="fa fa-check"></i><b>2.3.5</b> Importing Data using RStudio</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="3-r-programming-short-introduction.html"><a href="3-r-programming-short-introduction.html"><i class="fa fa-check"></i><b>3</b> R Programming - Short Introduction</a><ul>
<li class="chapter" data-level="3.1" data-path="3-1-programming-control-flow.html"><a href="3-1-programming-control-flow.html"><i class="fa fa-check"></i><b>3.1</b> Programming Control Flow</a><ul>
<li class="chapter" data-level="3.1.1" data-path="3-1-programming-control-flow.html"><a href="3-1-programming-control-flow.html#if-else-conditional-statements"><i class="fa fa-check"></i><b>3.1.1</b> if-else Conditional Statements</a></li>
<li class="chapter" data-level="3.1.2" data-path="3-1-programming-control-flow.html"><a href="3-1-programming-control-flow.html#loops"><i class="fa fa-check"></i><b>3.1.2</b> Loops</a></li>
<li class="chapter" data-level="3.1.3" data-path="3-1-programming-control-flow.html"><a href="3-1-programming-control-flow.html#mathttwhile-loop"><i class="fa fa-check"></i><b>3.1.3</b> <span class="math inline">\(\mathtt{while}\)</span> loop</a></li>
<li class="chapter" data-level="3.1.4" data-path="3-1-programming-control-flow.html"><a href="3-1-programming-control-flow.html#mathttrepeat-loop"><i class="fa fa-check"></i><b>3.1.4</b> <span class="math inline">\(\mathtt{repeat}\)</span> loop</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="3-2-functions-in-r.html"><a href="3-2-functions-in-r.html"><i class="fa fa-check"></i><b>3.2</b> Functions in R</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="4-data-exploration.html"><a href="4-data-exploration.html"><i class="fa fa-check"></i><b>4</b> Data Exploration</a><ul>
<li class="chapter" data-level="4.1" data-path="4-1-data-preprocessing.html"><a href="4-1-data-preprocessing.html"><i class="fa fa-check"></i><b>4.1</b> Data Preprocessing</a><ul>
<li class="chapter" data-level="4.1.1" data-path="4-1-data-preprocessing.html"><a href="4-1-data-preprocessing.html#extracting-data"><i class="fa fa-check"></i><b>4.1.1</b> Extracting Data</a></li>
<li class="chapter" data-level="4.1.2" data-path="4-1-data-preprocessing.html"><a href="4-1-data-preprocessing.html#combining-data-frames"><i class="fa fa-check"></i><b>4.1.2</b> Combining Data Frames</a></li>
<li class="chapter" data-level="4.1.3" data-path="4-1-data-preprocessing.html"><a href="4-1-data-preprocessing.html#sub-setting-and-logical-data-selection"><i class="fa fa-check"></i><b>4.1.3</b> Sub setting and Logical Data Selection</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="4-2-data-transformation-from-wide-to-long-or-vice-versa.html"><a href="4-2-data-transformation-from-wide-to-long-or-vice-versa.html"><i class="fa fa-check"></i><b>4.2</b> Data Transformation from Wide to Long (or vice versa)</a></li>
<li class="chapter" data-level="4.3" data-path="4-3-summary-statistics.html"><a href="4-3-summary-statistics.html"><i class="fa fa-check"></i><b>4.3</b> Summary Statistics</a><ul>
<li class="chapter" data-level="4.3.1" data-path="4-3-summary-statistics.html"><a href="4-3-summary-statistics.html#example-descriptive-statistics-of-stock-returns"><i class="fa fa-check"></i><b>4.3.1</b> Example-Descriptive Statistics of Stock Returns</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="5-graphics-in-r-part-i.html"><a href="5-graphics-in-r-part-i.html"><i class="fa fa-check"></i><b>5</b> Graphics in R (Part-I)</a><ul>
<li class="chapter" data-level="5.1" data-path="5-1-basic-plots-in-r.html"><a href="5-1-basic-plots-in-r.html"><i class="fa fa-check"></i><b>5.1</b> Basic Plots in R</a><ul>
<li class="chapter" data-level="5.1.1" data-path="5-1-basic-plots-in-r.html"><a href="5-1-basic-plots-in-r.html#scatter-plot"><i class="fa fa-check"></i><b>5.1.1</b> Scatter Plot</a></li>
<li class="chapter" data-level="5.1.2" data-path="5-1-basic-plots-in-r.html"><a href="5-1-basic-plots-in-r.html#line-plot"><i class="fa fa-check"></i><b>5.1.2</b> Line Plot</a></li>
<li class="chapter" data-level="5.1.3" data-path="5-1-basic-plots-in-r.html"><a href="5-1-basic-plots-in-r.html#bar-plot"><i class="fa fa-check"></i><b>5.1.3</b> Bar Plot</a></li>
<li class="chapter" data-level="5.1.4" data-path="5-1-basic-plots-in-r.html"><a href="5-1-basic-plots-in-r.html#pie-chart"><i class="fa fa-check"></i><b>5.1.4</b> Pie Chart</a></li>
<li class="chapter" data-level="5.1.5" data-path="5-1-basic-plots-in-r.html"><a href="5-1-basic-plots-in-r.html#scatter-plot-1"><i class="fa fa-check"></i><b>5.1.5</b> Scatter Plot</a></li>
<li class="chapter" data-level="5.1.6" data-path="5-1-basic-plots-in-r.html"><a href="5-1-basic-plots-in-r.html#a-subset-can-also-be-selected-using-formula-method-for-example-the-following-r-code-will-generate-a-scatterplot-with-only-australia-uk-and-usa."><i class="fa fa-check"></i><b>5.1.6</b> A subset can also be selected using formula method, for example the following R code will generate a scatterplot with only Australia, UK and USA.</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="5-2-r-graphical-parameters.html"><a href="5-2-r-graphical-parameters.html"><i class="fa fa-check"></i><b>5.2</b> R Graphical Parameters</a></li>
<li class="chapter" data-level="5.3" data-path="5-3-introduction-to-ggplot2.html"><a href="5-3-introduction-to-ggplot2.html"><i class="fa fa-check"></i><b>5.3</b> Introduction to ggplot2</a><ul>
<li class="chapter" data-level="5.3.1" data-path="5-3-introduction-to-ggplot2.html"><a href="5-3-introduction-to-ggplot2.html#mathttqplot"><i class="fa fa-check"></i><b>5.3.1</b> <span class="math inline">\(\mathtt{qplot}\)</span></a></li>
<li class="chapter" data-level="5.3.2" data-path="5-3-introduction-to-ggplot2.html"><a href="5-3-introduction-to-ggplot2.html#layered-graphics-using-mathttggplot"><i class="fa fa-check"></i><b>5.3.2</b> Layered graphics using <span class="math inline">\(\mathtt{ggplot}\)</span></a></li>
<li class="chapter" data-level="5.3.3" data-path="5-3-introduction-to-ggplot2.html"><a href="5-3-introduction-to-ggplot2.html#arranging-plots-using-gridextra"><i class="fa fa-check"></i><b>5.3.3</b> Arranging plots using gridExtra</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="6-graphics-in-r-part-ii.html"><a href="6-graphics-in-r-part-ii.html"><i class="fa fa-check"></i><b>6</b> Graphics in R (Part-II)</a><ul>
<li class="chapter" data-level="6.1" data-path="6-1-visualising-covid-19-using-maps.html"><a href="6-1-visualising-covid-19-using-maps.html"><i class="fa fa-check"></i><b>6.1</b> Visualising COVID-19 using maps</a></li>
<li class="chapter" data-level="6.2" data-path="6-2-example-two.html"><a href="6-2-example-two.html"><i class="fa fa-check"></i><b>6.2</b> Example two</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="7-final-words.html"><a href="7-final-words.html"><i class="fa fa-check"></i><b>7</b> Final Words</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R for Research</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="introduction-to-ggplot2" class="section level2">
<h2><span class="header-section-number">5.3</span> Introduction to ggplot2</h2>
<ul>
<li><em>ggplot2</em> <span class="citation">(Wickham <a href="#ref-Wickham2009" role="doc-biblioref">2009</a>)</span> is an R package which provides a large variety of plotting functionality to enable better and highly customisable graphs.</li>
<li>These functions in ggplot2 are based on the grammar of graphics <span class="citation">(Wickham <a href="#ref-Wickham2010" role="doc-biblioref">2010</a>)</span> which is a more formal and structured way to plotting, for a list of various possible graphs, customisation settings and procedures see <a href="https://ggplot2.tidyverse.org/" class="uri">https://ggplot2.tidyverse.org/</a></li>
</ul>
<div id="mathttqplot" class="section level3">
<h3><span class="header-section-number">5.3.1</span> <span class="math inline">\(\mathtt{qplot}\)</span></h3>
<ul>
<li><p><span class="math inline">\(\mathtt{qplot}\)</span> stands for quick plot and it makes is easy to produce plots which may often require several lines of codes using base R graphics system.</p></li>
<li><p><span class="math inline">\(\mathtt{qplot}\)</span> is particularly useful for beginners as they are just getting used to the <span class="math inline">\(\mathtt{plot}\)</span> function from the base package also the data arguments in <span class="math inline">\(\mathtt{qplot}\)</span> are same as in the <span class="math inline">\(\mathtt{plot}\)</span> function (see <span class="math inline">\(\mathtt{help(qplot)}\)</span> for other arguments to the function).</p></li>
</ul>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="5-3-introduction-to-ggplot2.html#cb230-1"></a>x =<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">100</span>)</span>
<span id="cb230-2"><a href="5-3-introduction-to-ggplot2.html#cb230-2"></a>y =<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">100</span>)</span>
<span id="cb230-3"><a href="5-3-introduction-to-ggplot2.html#cb230-3"></a><span class="co"># load the library</span></span>
<span id="cb230-4"><a href="5-3-introduction-to-ggplot2.html#cb230-4"></a><span class="kw">library</span>(ggplot2)</span>
<span id="cb230-5"><a href="5-3-introduction-to-ggplot2.html#cb230-5"></a><span class="co"># simple scatterplot using qplot (figure-12)</span></span>
<span id="cb230-6"><a href="5-3-introduction-to-ggplot2.html#cb230-6"></a><span class="kw">qplot</span>(x, y)</span></code></pre></div>
<div class="figure"><span id="fig:unnamed-chunk-15"></span>
<img src="05-plots_1_files/figure-html/unnamed-chunk-15-1.png" alt="Scatterplot using qplot" width="672" />
<p class="caption">
Figure 5.11: Scatterplot using qplot
</p>
</div>
<ul>
<li><p>The argument geom, which stands for geometric objects drawn to represent data has to be changed to “line” create this line plot.</p></li>
<li><p>Similarly there is an option to plot histograms using the argument <em>geom=“histogram”</em></p></li>
</ul>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="5-3-introduction-to-ggplot2.html#cb231-1"></a><span class="kw">load</span>(<span class="st">&quot;data/data_fin.RData&quot;</span>)</span>
<span id="cb231-2"><a href="5-3-introduction-to-ggplot2.html#cb231-2"></a><span class="co"># line plot using qplot (figure-13)</span></span>
<span id="cb231-3"><a href="5-3-introduction-to-ggplot2.html#cb231-3"></a><span class="kw">qplot</span>(<span class="dt">x =</span> FinData<span class="op">$</span>Date, <span class="dt">y =</span> FinData<span class="op">$</span>DJI, <span class="dt">geom =</span> <span class="st">&quot;line&quot;</span>, <span class="dt">xlab =</span> <span class="st">&quot;Dates&quot;</span>, <span class="dt">ylab =</span> <span class="st">&quot;Prices&quot;</span>, </span>
<span id="cb231-4"><a href="5-3-introduction-to-ggplot2.html#cb231-4"></a>    <span class="dt">main =</span> <span class="st">&quot;DJIA Price Timeseries&quot;</span>)</span></code></pre></div>
<div class="figure"><span id="fig:unnamed-chunk-16"></span>
<img src="05-plots_1_files/figure-html/unnamed-chunk-16-1.png" alt="Line Plot with lables using qplot" width="672" />
<p class="caption">
Figure 5.12: Line Plot with lables using qplot
</p>
</div>
</div>
<div id="layered-graphics-using-mathttggplot" class="section level3">
<h3><span class="header-section-number">5.3.2</span> Layered graphics using <span class="math inline">\(\mathtt{ggplot}\)</span></h3>
<ul>
<li><p>The <span class="math inline">\(\mathtt{qplot}\)</span> function is just sufficient for creating various plots with better presentation compared to base R plots but the true capabilities of ggplot2 are realised by the function <span class="math inline">\(\mathtt{ggplot}\)</span>.</p></li>
<li><p>It is important to note that <span class="math inline">\(\mathtt{ggplot}\)</span> function requires the data in “long” format and hence it is required to first transform the dataset to “long” from “wide” format as in ggplot2, groups are identified by rows, not by columns.</p></li>
</ul>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="5-3-introduction-to-ggplot2.html#cb232-1"></a><span class="co"># Read &#39;long&#39; format data</span></span>
<span id="cb232-2"><a href="5-3-introduction-to-ggplot2.html#cb232-2"></a><span class="kw">load</span>(<span class="st">&quot;data/GDP_l.RData&quot;</span>)</span>
<span id="cb232-3"><a href="5-3-introduction-to-ggplot2.html#cb232-3"></a><span class="co"># data snapshot</span></span>
<span id="cb232-4"><a href="5-3-introduction-to-ggplot2.html#cb232-4"></a><span class="kw">head</span>(GDP_l)</span></code></pre></div>
<pre><code>  Year   Country      GDP
1 1990 Australia 18247.39
2 1991 Australia 18837.19
3 1992 Australia 18599.00
4 1993 Australia 17658.08
5 1994 Australia 18080.70
6 1995 Australia 20375.30</code></pre>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="5-3-introduction-to-ggplot2.html#cb234-1"></a><span class="co"># creating the aesthetics using ggplot</span></span>
<span id="cb234-2"><a href="5-3-introduction-to-ggplot2.html#cb234-2"></a>p1 =<span class="st"> </span><span class="kw">ggplot</span>(GDP_l, <span class="kw">aes</span>(Country, GDP, <span class="dt">fill =</span> Year))</span></code></pre></div>
<ul>
<li>A plot can be created by adding another layer to p1</li>
</ul>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="5-3-introduction-to-ggplot2.html#cb235-1"></a><span class="co"># figure</span></span>
<span id="cb235-2"><a href="5-3-introduction-to-ggplot2.html#cb235-2"></a>p1 <span class="op">+</span><span class="st"> </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>)</span></code></pre></div>
<div class="figure"><span id="fig:unnamed-chunk-18"></span>
<img src="05-plots_1_files/figure-html/unnamed-chunk-18-1.png" alt="Bar Chart Using ggplot function" width="672" />
<p class="caption">
Figure 5.13: Bar Chart Using ggplot function
</p>
</div>
<ul>
<li>To draw a line chart using <span class="math inline">\(\mathtt{ggplot}\)</span>, <span class="math inline">\(\mathtt{geom\_line()}\)</span></li>
</ul>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="5-3-introduction-to-ggplot2.html#cb236-1"></a><span class="co"># change the aesthetics to show time on X-axis and GDP values on Y-axis the</span></span>
<span id="cb236-2"><a href="5-3-introduction-to-ggplot2.html#cb236-2"></a><span class="co"># colour line fill be according to the country</span></span>
<span id="cb236-3"><a href="5-3-introduction-to-ggplot2.html#cb236-3"></a>p2 =<span class="st"> </span><span class="kw">ggplot</span>(GDP_l, <span class="kw">aes</span>(Year, GDP, <span class="dt">colour =</span> Country, <span class="dt">group =</span> Country))</span>
<span id="cb236-4"><a href="5-3-introduction-to-ggplot2.html#cb236-4"></a>p2 <span class="op">+</span><span class="st"> </span><span class="kw">geom_line</span>()</span></code></pre></div>
<div class="figure"><span id="fig:unnamed-chunk-19"></span>
<img src="05-plots_1_files/figure-html/unnamed-chunk-19-1.png" alt="Line Chart Using ggplot" width="960" />
<p class="caption">
Figure 2.1: Line Chart Using ggplot
</p>
</div>
<ul>
<li><p>These lines can also be drawn in separate panels using faceting. Faceting creates a subplot for each group side by side.</p></li>
<li><p>Faceting can be used to either to split the data into vertical groups using <span class="math inline">\(\mathtt{facet\_grid}\)</span> or horizontal groups using <span class="math inline">\(\mathtt{facet\_wrap}\)</span>.</p></li>
</ul>
<p>• Figure plots GDP for each country in a separate subplot using grid faceting.</p>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="5-3-introduction-to-ggplot2.html#cb237-1"></a><span class="co"># change the aesthetics to show time on X-axis and GDP values on Y-axis the</span></span>
<span id="cb237-2"><a href="5-3-introduction-to-ggplot2.html#cb237-2"></a><span class="co"># colour line fill be according to the country</span></span>
<span id="cb237-3"><a href="5-3-introduction-to-ggplot2.html#cb237-3"></a>p2 =<span class="st"> </span><span class="kw">ggplot</span>(GDP_l, <span class="kw">aes</span>(Year, GDP, <span class="dt">colour =</span> Country, <span class="dt">group =</span> Country))</span>
<span id="cb237-4"><a href="5-3-introduction-to-ggplot2.html#cb237-4"></a>p2 <span class="op">+</span><span class="st"> </span><span class="kw">geom_line</span>() <span class="op">+</span><span class="st"> </span><span class="kw">facet_grid</span>(Country <span class="op">~</span><span class="st"> </span>.)</span></code></pre></div>
<div class="figure"><span id="fig:unnamed-chunk-20"></span>
<img src="05-plots_1_files/figure-html/unnamed-chunk-20-1.png" alt="Faceting in ggplot (Line Chart)" width="672" />
<p class="caption">
Figure 5.14: Faceting in ggplot (Line Chart)
</p>
</div>
</div>
<div id="arranging-plots-using-gridextra" class="section level3">
<h3><span class="header-section-number">5.3.3</span> Arranging plots using gridExtra</h3>
<ul>
<li><p>There are a few pacakges which allow to arrange ggplots in a grid or a speacific order. gridExtra is one of them and is quite useful in arranging the plots.</p></li>
<li><p>Look at the Vignette for egg package for more options. <a href="https://cran.r-project.org/web/packages/egg/vignettes/Ecosystem.html" class="uri">https://cran.r-project.org/web/packages/egg/vignettes/Ecosystem.html</a></p></li>
<li><p>Let’s create three ggplots</p></li>
</ul>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb238-1"><a href="5-3-introduction-to-ggplot2.html#cb238-1"></a>p1<span class="fl">.1</span> =<span class="st"> </span><span class="kw">ggplot</span>(GDP_l, <span class="kw">aes</span>(<span class="dt">x =</span> Year, <span class="dt">y =</span> GDP))</span>
<span id="cb238-2"><a href="5-3-introduction-to-ggplot2.html#cb238-2"></a>p2<span class="fl">.1</span> =<span class="st"> </span>p1<span class="fl">.1</span> <span class="op">+</span><span class="st"> </span><span class="kw">geom_bar</span>(<span class="kw">aes</span>(<span class="dt">fill =</span> Country), <span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="dt">position =</span> <span class="st">&quot;dodge&quot;</span>)</span></code></pre></div>
<ul>
<li>Stacked bar chart (previous example)</li>
</ul>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="5-3-introduction-to-ggplot2.html#cb239-1"></a>p1<span class="fl">.2</span> =<span class="st"> </span><span class="kw">ggplot</span>(GDP_l[GDP_l<span class="op">$</span>Country <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Australia&quot;</span>, <span class="st">&quot;UK&quot;</span>, <span class="st">&quot;USA&quot;</span>), ], <span class="kw">aes</span>(Year, </span>
<span id="cb239-2"><a href="5-3-introduction-to-ggplot2.html#cb239-2"></a>    GDP))</span>
<span id="cb239-3"><a href="5-3-introduction-to-ggplot2.html#cb239-3"></a>p2<span class="fl">.2</span> =<span class="st"> </span>p1<span class="fl">.2</span> <span class="op">+</span><span class="st"> </span><span class="kw">geom_col</span>(<span class="kw">aes</span>(<span class="dt">fill =</span> Country)) <span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;GDP for Aus, US and UK&quot;</span>)  <span class="co">#using labs to modify title</span></span>
<span id="cb239-4"><a href="5-3-introduction-to-ggplot2.html#cb239-4"></a>p2<span class="fl">.2</span></span></code></pre></div>
<div class="figure"><span id="fig:unnamed-chunk-22"></span>
<img src="05-plots_1_files/figure-html/unnamed-chunk-22-1.png" alt="Bar Chart with Selected Data" width="672" />
<p class="caption">
Figure 5.15: Bar Chart with Selected Data
</p>
</div>
<ul>
<li>Stock data</li>
</ul>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb240-1"><a href="5-3-introduction-to-ggplot2.html#cb240-1"></a>p1<span class="fl">.3</span> =<span class="st"> </span><span class="kw">ggplot</span>(FinData, <span class="kw">aes</span>(<span class="dt">x =</span> Date, <span class="dt">y =</span> DJI))</span>
<span id="cb240-2"><a href="5-3-introduction-to-ggplot2.html#cb240-2"></a>p2<span class="fl">.3</span> =<span class="st"> </span>p1<span class="fl">.3</span> <span class="op">+</span><span class="st"> </span><span class="kw">geom_path</span>(<span class="dt">colour =</span> <span class="st">&quot;darkblue&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">geom_smooth</span>(<span class="dt">colour =</span> <span class="st">&quot;black&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">theme_linedraw</span>()  <span class="co">#changing theme</span></span>
<span id="cb240-3"><a href="5-3-introduction-to-ggplot2.html#cb240-3"></a>p2<span class="fl">.3</span></span></code></pre></div>
<pre><code>`geom_smooth()` using method = &#39;gam&#39; and formula &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</code></pre>
<pre><code>Warning: Removed 27 rows containing non-finite values (stat_smooth).</code></pre>
<div class="figure"><span id="fig:unnamed-chunk-23"></span>
<img src="05-plots_1_files/figure-html/unnamed-chunk-23-1.png" alt="Stock Series Plot with Smooth Curve" width="672" />
<p class="caption">
Figure 5.16: Stock Series Plot with Smooth Curve
</p>
</div>
<ul>
<li>Now use gridExtra to put these together</li>
</ul>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="5-3-introduction-to-ggplot2.html#cb243-1"></a><span class="kw">library</span>(gridExtra)</span>
<span id="cb243-2"><a href="5-3-introduction-to-ggplot2.html#cb243-2"></a>fig1 =<span class="st"> </span><span class="kw">grid.arrange</span>(p2<span class="fl">.1</span>, p2<span class="fl">.2</span>, p2<span class="fl">.3</span>, <span class="dt">nrow =</span> <span class="dv">3</span>, <span class="dt">heights =</span> <span class="kw">c</span>(<span class="dv">20</span>, <span class="dv">12</span>, <span class="dv">12</span>), <span class="dt">top =</span> <span class="st">&quot;Combined plots in three rows&quot;</span>)</span></code></pre></div>
<pre><code>`geom_smooth()` using method = &#39;gam&#39; and formula &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</code></pre>
<pre><code>Warning: Removed 27 rows containing non-finite values (stat_smooth).</code></pre>
<div class="figure"><span id="fig:unnamed-chunk-24"></span>
<img src="05-plots_1_files/figure-html/unnamed-chunk-24-1.png" alt="Combined plots" width="672" />
<p class="caption">
Figure 5.17: Combined plots
</p>
</div>
<ul>
<li>The plots can be saved using the <span class="math inline">\(\mathtt{ggsave}\)</span> function</li>
</ul>
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb246-1"><a href="5-3-introduction-to-ggplot2.html#cb246-1"></a><span class="kw">ggsave</span>(<span class="dt">filename =</span> <span class="st">&quot;cobined_plot.pdf&quot;</span>, <span class="dt">plot =</span> fig1)</span></code></pre></div>

</div>
</div>
<!-- </div> -->
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-Wickham2009">
<p>Wickham, Hadley. 2009. <em>Ggplot2: Elegant Graphics for Data Analysis</em>. Springer.</p>
</div>
<div id="ref-Wickham2010">
<p>Wickham, Hadley. 2010. “A Layered Grammar of Graphics.” <em>Journal of Computational and Graphical Statistics</em> 19 (1): 3–28.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="5-2-r-graphical-parameters.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="6-graphics-in-r-part-ii.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
